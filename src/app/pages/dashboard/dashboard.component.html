<section class="max-w-7xl mx-auto px-4 py-8 text-slate-100">
  <!-- Header avec stats du jour -->
  <div class="flex flex-col lg:flex-row lg:items-center justify-between gap-4 mb-6">
    <div>
      <h2 class="text-3xl font-extrabold tracking-tight">{{ i18n.t('dashboard.title') }}</h2>
      <p class="text-sm text-slate-400 mt-1">{{ i18n.t('dashboard.subtitle') || 'Vue d\'ensemble de vos rendez-vous' }}</p>
    </div>

    <!-- Stats rapides du jour -->
    <div class="flex items-center gap-3">
      <!-- Nombre de RDV -->
      <div class="flex items-center gap-2 px-3 py-2 rounded-xl bg-emerald-500/10 border border-emerald-500/20">
        <div class="w-8 h-8 rounded-lg bg-emerald-500/20 flex items-center justify-center">
          <svg class="w-4 h-4 text-emerald-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M9 12l2 2 4-4"/>
            <rect x="3" y="4" width="18" height="18" rx="2"/>
          </svg>
        </div>
        <div class="text-sm">
          <div class="font-bold text-emerald-300">{{ items.length }}</div>
          <div class="text-xs text-emerald-400/70">RDV</div>
        </div>
      </div>

      <!-- Durée totale -->
      <div class="flex items-center gap-2 px-3 py-2 rounded-xl bg-sky-500/10 border border-sky-500/20">
        <div class="w-8 h-8 rounded-lg bg-sky-500/20 flex items-center justify-center">
          <svg class="w-4 h-4 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M12 6v6l4 2"/>
          </svg>
        </div>
        <div class="text-sm">
          <div class="font-bold text-sky-300">{{ totalMinutes }}</div>
          <div class="text-xs text-sky-400/70">min</div>
        </div>
      </div>

      <!-- Badge date -->
      <div class="hidden sm:flex items-center gap-2 text-sm px-4 py-2 rounded-full bg-white/5 border border-white/10">
        <svg class="h-4 w-4 text-sky-400" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
          <line x1="16" y1="2" x2="16" y2="6"/>
          <line x1="8" y1="2" x2="8" y2="6"/>
          <line x1="3" y1="10" x2="21" y2="10"/>
        </svg>
        <span class="font-semibold capitalize">{{ dateObj | date:'EEEE' }}</span>
        <span class="text-slate-400">•</span>
        <span>{{ dateObj | date:'d MMMM yyyy' }}</span>
      </div>
    </div>
  </div>

  <!-- Toolbar -->
  <div class="rounded-2xl bg-white/[0.04] border border-white/10 p-4 md:p-5 mb-6">
    <div class="flex flex-wrap items-center gap-3">

      <!-- Bouton précédent -->
      <button
        class="h-11 w-11 shrink-0 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition group"
        (click)="prevDay()"
        [attr.title]="i18n.t('appointments.prevDay')">
        <svg class="w-5 h-5 text-slate-400 group-hover:text-white transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M15 18l-6-6 6-6"/>
        </svg>
      </button>

      <!-- Date picker -->
      <div class="relative flex-1 max-w-xs">
        <span class="absolute left-3 top-1/2 -translate-y-1/2 opacity-70">
          <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <rect x="3" y="4" width="18" height="18" rx="2"/><path d="M16 2v4M8 2v4M3 10h18"/>
          </svg>
        </span>
        <input type="date" class="h-11 w-full pl-9 pr-3 rounded-xl bg-white/5 border border-white/10 focus:outline-none focus:ring-2 focus:ring-white/20"
               [ngModel]="date" (ngModelChange)="setDate($event)" />
      </div>

      <!-- Bouton suivant -->
      <button
        class="h-11 w-11 shrink-0 rounded-xl bg-white/5 border border-white/10 flex items-center justify-center hover:bg-white/10 transition group"
        (click)="nextDay()"
        [attr.title]="i18n.t('appointments.nextDay')">
        <svg class="w-5 h-5 text-slate-400 group-hover:text-white transition" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M9 18l6-6-6-6"/>
        </svg>
      </button>

      <!-- Bouton Aujourd'hui -->
      <button
        class="h-11 px-4 shrink-0 rounded-xl text-sm font-medium transition"
        [ngClass]="isToday
          ? 'bg-sky-500/30 border border-sky-500/40 text-sky-200'
          : 'bg-white/5 border border-white/10 text-white hover:bg-sky-500/20 hover:border-sky-500/30 hover:text-sky-200'"
        (click)="goToday()">
        {{ i18n.t('appointments.today') }}
      </button>

      <!-- Indicateur mode lecture seule -->
      <div class="flex items-center gap-2 text-sm px-4 py-2 rounded-xl bg-slate-700/30 text-slate-400 border border-white/5">
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
          <circle cx="12" cy="12" r="3"/>
        </svg>
        {{ i18n.t('dashboard.viewOnly') }}
      </div>

      <!-- Lien vers création de RDV -->
      <a routerLink="/gestion-rendez-vous" class="ml-auto h-11 px-4 rounded-xl bg-emerald-500/20 border border-emerald-500/30 text-emerald-300 hover:bg-emerald-500/30 transition flex items-center gap-2">
        <svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M12 5v14m-7-7h14"/>
        </svg>
        {{ i18n.t('dashboard.addAppointment') }}
      </a>
    </div>
  </div>

  <!-- Deux colonnes A & B -->
  <div class="grid md:grid-cols-2 gap-5">
    <!-- Pont A -->
    <div class="rounded-2xl bg-white/[0.04] border border-white/10 p-4">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-semibold">{{ i18n.t('dashboard.slotsA') }}</h3>
        <span class="text-xs text-slate-300">{{ i18n.t('dashboard.viewOnly') }}</span>
      </div>
      <ng-container *ngIf="showSlots">
        <app-slot-picker
          [date]="date"
          [duration]="duration"
          [bay]="'A'"
          [items]="items"
          [serviceType]="''"
          [canBook]="false"
          [needService]="false"
          [needClient]="false"
          [isLoading]="isLoading"
          [readOnly]="true"
        ></app-slot-picker>
      </ng-container>
    </div>

    <!-- Pont B -->
    <div class="rounded-2xl bg-white/[0.04] border border-white/10 p-4">
      <div class="flex items-center justify-between mb-3">
        <h3 class="text-lg font-semibold">{{ i18n.t('dashboard.slotsB') }}</h3>
        <span class="text-xs text-slate-300">{{ i18n.t('dashboard.viewOnly') }}</span>
      </div>
      <ng-container *ngIf="showSlots">
        <app-slot-picker
          [date]="date"
          [duration]="duration"
          [bay]="'B'"
          [items]="items"
          [serviceType]="''"
          [canBook]="false"
          [needService]="false"
          [needClient]="false"
          [isLoading]="isLoading"
          [readOnly]="true"
        ></app-slot-picker>
      </ng-container>
    </div>
  </div>
</section>
